<!DOCTYPE html>
<html lang="en-gb"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
    <meta name="author" content="Vincent Humeau">
  
  
    <meta name="description" content="Collection of things I learned around web development">
  
  
  <title> Vue - 101 todo PWA tutorial  | Javascript  | devNotes</title>

  <link rel="manifest" href="https://vinceumo.github.io/devNotes/manifest.json">
  <meta name="msapplication-config" content="https://vinceumo.github.io/devNotes/browserconfig.xml">

  <link rel="apple-touch-icon" sizes="180x180" href="https://vinceumo.github.io/devNotes/images/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://vinceumo.github.io/devNotes/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://vinceumo.github.io/devNotes/images/favicons/favicon-16x16.png">
  <link rel="mask-icon" href="https://vinceumo.github.io/devNotes/images/favicons/safari-pinned-tab.svg" color="#000000">
  <link rel="shortcut icon" href="https://vinceumo.github.io/devNotes/favicon.ico">
  <meta name="msapplication-TileColor" content="#212121">
  <meta name="theme-color" content="#212121">

  <link rel="stylesheet" href="https://vinceumo.github.io/devNotes/css/screen.min.css">  
</head>
<body>
        <div class="page-wrapper"><header class="page-header">
  <p>
    <a class="site-title" href="https://vinceumo.github.io/devNotes">
      devNotes
    </a> 
    
    <small>by 
      <a
        href="https:www.vincent-humeau.com" rel="author">
        Vincent Humeau
      </a>
    </small>
    
  </p>
</header><main id="main-content" class="page-content">
  <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  
    <header class="post-header">
      <h1 itemprop="name headline">Vue - 101 todo PWA tutorial </h1>
      <p class="post-meta">
        <time class="dt-published" datetime="2018-07-20 23:00:00 &#43;0000 UTC" itemprop="datePublished">
          Jul 07, 2018
        </time></p>
    </header>

    
    <details>
      <summary>Table of contents</summary>
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#toggle-navigation-on-mobile">Toggle navigation on mobile</a>
<ul>
<li><a href="#documentation-references">Documentation references</a></li>
</ul></li>
<li><a href="#bind-our-todo-lists-to-the-side-navigation">Bind our todo lists to the side navigation</a>
<ul>
<li><a href="#documentation-references-1">Documentation references</a></li>
</ul></li>
<li><a href="#main-section">Main section</a>
<ul>
<li><a href="#header">Header</a></li>
<li><a href="#todos">Todos</a></li>
<li><a href="#documentation-references-2">Documentation references</a></li>
</ul></li>
<li><a href="#change-current-list">Change current list</a></li>
<li><a href="#create-a-new-list">Create a new list</a>
<ul>
<li><a href="#toggle-the-sidebar">Toggle the sidebar</a></li>
<li><a href="#add-the-new-list">Add the new list</a></li>
<li><a href="#documentation-references-3">Documentation references</a></li>
</ul></li>
<li><a href="#edit-a-list">Edit a list</a>
<ul>
<li><a href="#toggle-the-sidebar-content">Toggle the sidebar content</a></li>
<li><a href="#edit-list-form">Edit list form</a>
<ul>
<li><a href="#delete-a-list">Delete a list</a></li>
<li><a href="#change-the-title-and-keyword-value">Change the title and keyword value</a></li>
</ul></li>
<li><a href="#documentation-references-4">Documentation references</a></li>
</ul></li>
<li><a href="#create-and-edit-a-todo">Create and edit a todo</a>
<ul>
<li>
<ul>
<li><a href="#create-a-todo">Create a todo</a></li>
<li><a href="#edit-a-todo">Edit a todo</a></li>
</ul></li>
</ul></li>
<li><a href="#localstorage">LocalStorage</a>
<ul>
<li><a href="#documentation-references-5">Documentation references</a></li>
</ul></li>
</ul></li>
<li><a href="#bonus-offline-progressive-web-app-pwa">Bonus - Offline Progressive Web App (PWA)</a>
<ul>
<li><a href="#set-up-a-pwa">Set up a PWA</a>
<ul>
<li><a href="#generate-icon-assets">Generate icon assets</a></li>
<li><a href="#web-app-manifest">Web App Manifest</a></li>
<li><a href="#service-workers">Service workers</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </details>
    
    
  
    <div class="post-content" itemprop="articleBody">
      
      

<p>The goal of this tutorial is to give an introduction to vue.js ‚ù§.</p>

<p>This content was initially written for a workshop for <a href="https://www.damdigital.com/">DAM Digital London</a>.</p>

<p>Vue.js is a progressive framework for building user interfaces (UI).</p>

<p>This tutorial assumes that you already have some intermediate knowledge about HTML, CSS and Javascript. If you don&rsquo;t have any knowledge of these fields, check out <a href="https://www.freecodecamp.org/">freeCodeCamp</a>, they have great resources to learn these topics üòâ.</p>

<p>Here are the subjects this tutorial will cover:</p>

<ul>
<li>v-bind directive</li>
<li>Class and Style Bindings</li>
<li>Event Handling</li>
<li>Data binding in attributes</li>
<li>List Rendering</li>
<li>Interpolations - Mustache</li>
<li>Form Input Bindings - Checkbox</li>
<li>v-model</li>
<li>Methods</li>
<li>Conditional Rendering</li>
<li>v-if</li>
<li>v-else</li>
<li>Introduction to PWA</li>
</ul>

<p>We are going to create a todo application with the ability to have multiple lists of todos.</p>

<p><img src="https://image.ibb.co/g3g8Gy/Screenshot_2018_07_17_Todo_list.png" alt="todo app screenshot" /></p>

<h2 id="getting-started">Getting started</h2>

<p>Clone the <a href="https://github.com/vinceumo/todo-vue-starter-materials">starter materials from github</a>. It includes the base HTML, CSS and JS.</p>

<p>You can find the final code of this tutorial on <a href="https://github.com/vinceumo/todo">github</a>, and the demo if you follow this <a href="http://vinceumo.github.io/todo">link</a>.</p>

<p>Vue CDN is already included in our index.html, as well as our CSS and content/js/app.js üòÉ.</p>

<h2 id="toggle-navigation-on-mobile">Toggle navigation on mobile</h2>

<p>First thing first, the side navigation on mobile (üì± &lt; 850px) should show and hide.</p>

<p><img src="https://image.ibb.co/c7qGmy/menu.gif" alt="toggle nav" /></p>

<p>When we click on <strong>Menu</strong> we want <code>&lt;nav&gt;</code> to toggle the class <code>.is-open</code>.</p>

<p>In vue.js, <code>v-bind</code> allow us to bind data inside an html attribute. E.g. <code>v-bind:id=&quot;&quot;</code>, <code>v-bind:style=&quot;&quot;</code>, <code>v-bind:data-target=&quot;&quot;</code>, etc. The shorthand for <code>v-bind</code> is <code>:</code>.</p>

<p>In <code>index.html</code>, we will dynamically pass <code>.is-open</code> using <code>v-bind:class</code>. If <code>isNavOpen</code> is true, then we will add our class.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-open&#39;: isNavOpen}&#34;</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span></code></pre></div>
<p>In <code>content/js/app.js</code>, we need <code>isNavOpen</code> in our data. If you change the value of this last one to <strong>true</strong>, the nav will show up.</p>

<p>The <strong>data</strong> property in vue.js is where we store the data of our application but as well the state of our UI. For example, <code>isNavOpen</code> is by default set to false, but by changing its value to true, we can bind the class <em>is-open</em> to the DOM.</p>

<p>In our app.js, we need to add <code>isNavOpen: false</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now we want to change the value of <code>isNavOpen</code> when we click on the <strong>Menu</strong> button.</p>

<p>We are going to use the event handler &lsquo;on click&rsquo;. In vue.js, we can use <code>v-on:</code> or <code>@</code> (Shorthands), to listen to DOM events. In our case, we want to listen to a click event. We are then going to use <code>v-on:click</code>/<code>@click</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isNavOpen = !isNavOpen&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;menu&#34;</span><span class="p">&gt;</span>Menu<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>As you can see, we can pass an inline javascript statement, we can as well use a method (function), we will see later in this tutorial how to use this last one.</p>

<h3 id="documentation-references">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/class-and-style.html">Class and Style Bindings</a></li>
<li><a href="https://vuejs.org/v2/guide/events.html">Event Handling</a></li>
<li><a href="https://vuejs.org/v2/api/#v-bind">v-bind directive</a></li>
<li><a href="https://vuejs.org/v2/guide/syntax.html#Attributes">Data binding in attributes</a></li>
</ul>

<h2 id="bind-our-todo-lists-to-the-side-navigation">Bind our todo lists to the side navigation</h2>

<p>In <code>content/js/app.js</code>, let&rsquo;s add some dummy lists so we can start to integrate our side navigation.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">todoLists</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;‚úàÔ∏è Trip to japan&#34;</span><span class="p">,</span>
        <span class="nx">keyword</span><span class="o">:</span> <span class="s2">&#34;japan&#34;</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Eat ramen&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Visit mt Fuji&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Learn japanese&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;üèÇ Ski trip to the Alps&#34;</span><span class="p">,</span>
        <span class="nx">keyword</span><span class="o">:</span> <span class="s2">&#34;Alps&#34;</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Find a chalet&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Learn how to ski&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;üçâ Groceries&#34;</span><span class="p">,</span>
        <span class="nx">keyword</span><span class="o">:</span> <span class="s2">&#34;Food&#34;</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Apples&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Banana&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Tomatoes&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span> <span class="p">},</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Bread&#34;</span><span class="p">,</span> <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>To render our lists in the side navigation, we need to use the <code>v-for</code> directive.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-open&#39;: isNavOpen}&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;todoList in todoLists&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>
        {{todoList.title}}
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
          {{todoList.items.length}}
        <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span><span class="p">&gt;</span>Create a new list<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span></code></pre></div>
<p><code>todoLists</code> is the source data and <code>todoList</code> is the alias used to iterate in our array.</p>

<p>We are using the &lsquo;moustache&rsquo; syntax <code>{{}}</code> to bind our text to the view. The moustache tag gets replace by the targeted value in <code>todoLists</code>.</p>

<h3 id="documentation-references-1">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/list.html">List Rendering</a></li>
<li><a href="https://vuejs.org/v2/guide/syntax.html#Text">Interpolations - Mustache</a></li>
</ul>

<h2 id="main-section">Main section</h2>

<h3 id="header">Header</h3>

<p>We want to be able to see our todos in the main section. For now, we will only render the first <code>todoLists</code> list (index 0).</p>

<p>In <code>content/js/app.js</code> =&gt; <code>data</code> add <code>currentListIndex: 0</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">currentListIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">todoLists</span><span class="o">:</span> <span class="p">[</span>
      <span class="c1">//...
</span><span class="c1"></span>    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Bind the title of the list using the moustache syntax in the header.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{todoLists[currentListIndex].title}}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></code></pre></div>
<p>The header has a background image. We are using <a href="https://source.unsplash.com/">Unsplash Source</a> to get a random image. We can specify a keyword to get a relevant image for our header.</p>

<pre><code>https://source.unsplash.com/featured/?{KEYWORD},{KEYWORD}
</code></pre>

<p>As we bind our keyword inside an attribute, we are using <code>v-bind</code></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">header</span>
  <span class="na">v-bind:style</span><span class="o">=</span><span class="s">&#34;&#39;background-image: url(https://source.unsplash.com/featured/?&#39; + todoLists[currentListIndex].keyword + &#39;)&#39;&#34;</span>
<span class="p">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span></code></pre></div>
<h3 id="todos">Todos</h3>

<p>To render our todos in the main section, we will need to use <code>v-for</code>. As we want an individual ID and names for each input we are passing the index in our for loop <code>v-for=&quot;(value, index) in object&quot;</code>.</p>

<p>We use <code>v-bind</code> to <em>check/tick</em> our todos inputs if these ones are already checked.</p>

<p>We are using <code>v-model</code> to update the value of <code>isCompleted</code> from our todos when we click on the checkbox. When our checkbox is checked, isCompleted will get the value of true and the parent <code>li</code> will automatically get the class <code>.is-completed</code> as isCompleted is <code>true</code>.</p>

<p>The <code>v-model</code> directive creates a two-way data bindings, meaning when the value gets updated the UI will be updated as well.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span>
    <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;(todo, index) in todoLists[currentListIndex].items&#34;</span>
    <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-completed&#39;: todo.isCompleted}&#34;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">v-bind:for</span><span class="o">=</span><span class="s">&#34;&#39;todo&#39; + index&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span>
        <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span>
        <span class="na">v-bind:name</span><span class="o">=</span><span class="s">&#34;&#39;todo&#39; + index&#34;</span>
        <span class="na">v-bind:id</span><span class="o">=</span><span class="s">&#34;&#39;todo&#39; + index&#34;</span>
        <span class="na">v-bind:checked</span><span class="o">=</span><span class="s">&#34;todo.isCompleted&#34;</span>
        <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;todo.isCompleted&#34;</span>
      <span class="p">/&gt;</span>
      {{todo.name}}
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span><span class="p">&gt;</span>Edit todo<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span><span class="p">&gt;</span>New Todo<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span></code></pre></div>
<h3 id="documentation-references-2">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/forms.html#Checkbox">Form Input Bindings - Checkbox</a></li>
<li><a href="https://vuejs.org/v2/api/#v-model">v-model</a></li>
</ul>

<h2 id="change-current-list">Change current list</h2>

<p>We want to be able to change the current list being displayed. This one is set by <code>currentListIndex</code> in our app&rsquo;s data. When we click on one of the list items we want to change <code>currentListIndex</code> to the index of this one and close the side navigation if open.</p>

<p>We need as well, to show the user the current list being displayed, to do so, we are adding the class <code>.is-active</code> if <code>currentListIndex === index</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">li</span>
  <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;(todoList, index) in todoLists&#34;</span>
  <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-active&#39; : currentListIndex === index}&#34;</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;currentListIndex = index; isNavOpen = false&#34;</span><span class="p">&gt;</span>
    {{todoList.title}}
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
      {{todoList.items.length}}
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span></code></pre></div>
<h2 id="create-a-new-list">Create a new list</h2>

<h3 id="toggle-the-sidebar">Toggle the sidebar</h3>

<p>When clicking on <strong>Create a new list</strong>, we show the <code>.sidebar</code>. To do so we want to add the class <code>.is-open</code> to this one, then close the nav bar if this one is open on mobile. The way to do this is quite similar to what we have done with the navigation on mobile.</p>

<p>In our data, we will first, add a new entry of <code>isSidebarOpen: false</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">isSidebarOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">currentListIndex</span><span class="o">:</span> <span class="mi">0</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now let&rsquo;s bind our class <code>.is-open</code> to our <code>.sidebar</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sidebar&#34;</span> <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-open&#39; : isSidebarOpen}&#34;</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>We need to add an event handler on click on <strong>Create a new list</strong>, that will open the sidebar and close the navigation on mobile:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = true; isNavOpen = false;&#34;</span><span class="p">&gt;</span>
  Create a new list
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>Nice, now we can open our sidebar üéâ.</p>

<p>Now let&rsquo;s close the sidebar when we click on <strong>cancel</strong>:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = false&#34;</span><span class="p">&gt;</span>
  Cancel
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<h3 id="add-the-new-list">Add the new list</h3>

<p>To create a new list, we need the values of the <em>title</em> and <em>keyword</em> inputs. When the user clicks on <strong>Create List</strong>, we will push our new values to <code>todoLists</code> in our data. If one of our input is empty we will show up a default value.</p>

<p>In our <em>app.js</em>, add a <code>tempNewList</code> array, it will store the values of our inputs.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">isSidebarOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">currentListIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">tempNewList</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">title</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">keyword</span><span class="o">:</span> <span class="kc">null</span>
      <span class="p">}</span>
    <span class="p">]</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now we will bind our inputs using <code>v-model</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Create a new list<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span><span class="p">&gt;</span>Title:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;My amazing next trip to south america&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;tempNewList.title&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span><span class="p">&gt;</span>Keyword:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;Colombia&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;tempNewList.keyword&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = false&#34;</span><span class="p">&gt;</span>
      Cancel
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-confirm&#34;</span><span class="p">&gt;</span>Create List<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></pre></div>
<p>Alright, now let&rsquo;s push our new <code>tempNewList</code> values to <code>todoLists</code>.</p>

<p>Create a <strong>method</strong> called <code>addNewList</code>. A <strong>method</strong> is a function stored as an object property. Here the object is the vue instance. In vue, our method will be stored in a <code>methods</code> object.</p>

<p><code>addNewList</code> method will follow this scenario:</p>

<ol>
<li>If <em>title</em> is empty, use a default string of <code>&quot;üïµÔ∏è‚Äç List with no name&quot;</code></li>
<li>If <em>keyword</em> is empty, use a default string of <code>&quot;earth&quot;</code></li>
<li>Push our values to <code>todoLists</code></li>
<li>Change our current list to our new list</li>
<li>Close the sidebar</li>
<li>Reset the values of our inputs</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">addNewList</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">listTitle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempNewList</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">listKeyword</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempNewList</span><span class="p">.</span><span class="nx">keyword</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">listTitle</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listTitle</span> <span class="o">=</span> <span class="s2">&#34;üïµÔ∏è‚Äç List with no name&#34;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">listKeyword</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listKeyword</span> <span class="o">=</span> <span class="s2">&#34;earth&#34;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">title</span><span class="o">:</span> <span class="nx">listTitle</span><span class="p">,</span>
        <span class="nx">keyword</span><span class="o">:</span> <span class="nx">listKeyword</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span> <span class="p">[]</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">currentListIndex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isSidebarOpen</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tempNewList</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tempNewList</span><span class="p">.</span><span class="nx">keyword</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Finally, we are going to bind our method to our <strong>Create list</strong> button.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-confirm&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;addNewList&#34;</span><span class="p">&gt;</span>
  Create List
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<h3 id="documentation-references-3">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/events.html#Method-Event-Handlers">Method Event Handlers</a></li>
</ul>

<h2 id="edit-a-list">Edit a list</h2>

<p>Good, now that we can create a new list, we want the ability to edit existing ones. We will be able to edit the title, the keyword and delete a list.</p>

<h3 id="toggle-the-sidebar-content">Toggle the sidebar content</h3>

<p>Create a new method <code>openSidebar</code>. This one will:</p>

<ol>
<li>Open the sidebar</li>
<li>Show the form that we want to use</li>
<li>Close the navigation if this one is open</li>
</ol>

<p>In data, let&rsquo;s add <code>sidebarContentToShow: null</code>, This will allow us to know what form should be shown.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isNavOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">isSidebarOpen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">sidebarContentToShow</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">currentListIndex</span><span class="o">:</span> <span class="mi">0</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>We have 4 forms in our sidebar that we will toggle:</p>

<ol>
<li><code>&quot;createNewList&quot;</code></li>
<li><code>&quot;editList&quot;</code></li>
<li><code>&quot;createNewTodo&quot;</code></li>
<li><code>&quot;editTodo&quot;</code></li>
</ol>

<p>In our HTML, we will conditionally render our forms depending on the value of <code>sidebarContentToShow</code>. To do so we are using the <code>v-if</code> directive. It will allow us to render our block if a condition is true. We need to uncomment our forms and add a <code>v-if</code> directive.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sidebar&#34;</span> <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-open&#39; : isSidebarOpen}&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sidebar-content&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;createNewList&#39;&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Create a new list<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- ... --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;editList&#39;&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Edit list<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- ... --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;createNewTodo&#39;&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Create a new todo<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- ... --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;editTodo&#39;&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Edit todo<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- ... --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>Now when we click on the <strong>Create a new list</strong>, the sidebar appears and we see&hellip; Nothing üò±. That normal remember, <code>sidebarContentToShow</code> is set to null üòâ.</p>

<p>To change the value of <code>sidebarContentToShow</code> we are going to create an <code>openSidebar</code> method that will open the sidebar and change the form that we want to show.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">openSidebar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contentToShow</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isSidebarOpen</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isNavOpen</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">sidebarContentToShow</span> <span class="o">=</span> <span class="nx">contentToShow</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now we can change <strong>Create a new list</strong> so we can use <code>openSidebar</code></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;openSidebar(&#39;createNewList&#39;)&#34;</span><span class="p">&gt;</span>
  Create a new list
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>And ta-dah we are now rendering the <strong>create a new list form</strong>. As you may have already guessed we will reuse our method with the <strong>Edit list</strong> button.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-primary&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;openSidebar(&#39;editList&#39;)&#34;</span><span class="p">&gt;</span>
  Edit list
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<h3 id="edit-list-form">Edit list form</h3>

<h4 id="delete-a-list">Delete a list</h4>

<p>We are going to start with the <strong>delete list</strong> button. Create a new method called <code>deleteList</code>. It will remove the currently shown list and show the first one.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//...
</span><span class="c1"></span><span class="nx">deleteList</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentListIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentListIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">isSidebarOpen</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//...
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;deleteList&#34;</span><span class="p">&gt;</span>
  Delete list
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>Now we can remove lists, but if we try to remove all lists we get an error and our app stop to work.</p>

<pre><code>[Vue warn]: Error in render: &quot;TypeError: todoLists[currentListIndex] is undefined&quot;
</code></pre>

<p>As you might have guessed, we have this error because our <code>todoLists</code> is empty and we still try to render some part of our application that relies on the values of <code>todoLists</code>. We will use conditional rendering <code>v-if</code> and <code>v-else</code>, to fix this issue we will render our main content only if <code>todoLists.length &gt; 0</code>. Moreover, we want the user to able to create a new list, we will use <code>v-else</code> to show an alternative main content that will help the user create a new list.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">main</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;todoLists.length &gt; 0&#34;</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">main</span> <span class="na">v-else</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">header</span>
    <span class="na">style</span><span class="o">=</span><span class="s">&#34;background-image: url(https://source.unsplash.com/featured/?cat&#34;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;header-content&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Please create a new list<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;openSidebar(&#39;createNewList&#39;)&#34;</span><span class="p">&gt;</span>
        Create a new list
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span></code></pre></div>
<h4 id="change-the-title-and-keyword-value">Change the title and keyword value</h4>

<p>Let&rsquo;s get back to our <strong>editList</strong> form. We want to:</p>

<ul>
<li>Bind our inputs with the right <code>todoLists</code> element using <code>v-model</code>.</li>
<li>When we click on <strong>done</strong>, we want to close our slider.</li>
<li>Only want to render this form if <code>todoLists.length &gt; 0</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;editList&#39; &amp;&amp; todoLists.length &gt; 0&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Edit list<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span><span class="p">&gt;</span>Title:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;listTitle&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;My amazing next trip to south america&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;todoLists[currentListIndex].title&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span><span class="p">&gt;</span>Keyword:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;listKeyword&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;Colombia&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;todoLists[currentListIndex].keyword&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;deleteList&#34;</span><span class="p">&gt;</span>
      Delete list
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-confirm&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = false&#34;</span><span class="p">&gt;</span>
      Done
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></pre></div>
<h3 id="documentation-references-4">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/conditional.html">Conditional Rendering</a></li>
<li><a href="https://vuejs.org/v2/api/#v-if">v-if</a></li>
<li><a href="https://vuejs.org/v2/guide/conditional.html#v-else">v-else</a></li>
</ul>

<h2 id="create-and-edit-a-todo">Create and edit a todo</h2>

<p>The UI of our app is almost finished, we still need to:</p>

<ul>
<li>Create a new todo in a list</li>
<li>Edit and delete an existing todo</li>
</ul>

<p>Sound similar to what we have done with the lists right? It is going to be almost the same steps.</p>

<h4 id="create-a-todo">Create a todo</h4>

<p>In our data create a new element of <code>tempNewList</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">tempNewTodo</span><span class="o">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">isCompleted</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">],</span>
</code></pre></div>
<p>We need a new method, so we can add our new todo to a list in <code>todoLists</code></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">addNewTodo</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">todoName</span><span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempNewTodo</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">todoCompleted</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempNewTodo</span><span class="p">.</span><span class="nx">isCompleted</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">todoName</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">todoName</span> <span class="o">=</span> <span class="s2">&#34;üïµÔ∏è‚Äç unnamed todo&#34;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentListIndex</span><span class="p">].</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">todoName</span><span class="p">,</span>
    <span class="nx">isCompleted</span><span class="o">:</span> <span class="nx">todoCompleted</span>
  <span class="p">});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">isSidebarOpen</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tempNewTodo</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tempNewTodo</span><span class="p">.</span><span class="nx">isCompleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Now let&rsquo;s dive in our HTML.</p>

<p>We need to open the sidebar with the <strong>createNewTodo</strong> form.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-add&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;openSidebar(&#39;createNewTodo&#39;)&#34;</span><span class="p">&gt;</span>
  New Todo
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>As we did before, we will bind our inputs using <code>v-model</code> and use the <code>addNewTodo</code> method to push our new values.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;createNewTodo&#39;&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Create a new todo<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span><span class="p">&gt;</span>Name:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;Do things...&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;tempNewTodo.name&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
    <span class="p">&gt;&lt;</span><span class="nt">input</span>
      <span class="na">name</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
      <span class="na">id</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
      <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span>
      <span class="na">v-bind:checked</span><span class="o">=</span><span class="s">&#34;tempNewTodo.isCompleted&#34;</span>
      <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;tempNewTodo.isCompleted&#34;</span>
    <span class="p">/&gt;</span>
    Is completed<span class="p">&lt;/</span><span class="nt">label</span>
  <span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = false&#34;</span><span class="p">&gt;</span>
      Cancel
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-confirm&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;addNewTodo&#34;</span><span class="p">&gt;</span>
      Create todo
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></pre></div>
<p>As we are now binding the data for <code>isCompleted</code> in our todos, we will show, in our navigation the number of completed todos.</p>

<p>In our <strong>app.js</strong>, create a <code>totalTodosCompleted</code> method passing the index of the current todoList.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">totalTodosCompleted</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">isCompleted</span><span class="p">){</span>
      <span class="nx">total</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">total</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>And now in our <code>navigation</code>, we are going to use our new method to return the total of completed todos.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">li</span>
  <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;(todoList, index) in todoLists&#34;</span>
  <span class="na">v-bind:class</span><span class="o">=</span><span class="s">&#34;{&#39;is-active&#39; : currentListIndex === index}&#34;</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;currentListIndex = index; isNavOpen = false&#34;</span><span class="p">&gt;</span>
    {{todoList.title}}
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
      {{totalTodosCompleted(index)}} / {{todoList.items.length}}
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span></code></pre></div>
<h4 id="edit-a-todo">Edit a todo</h4>

<p>To edit a todo, first, we need to know the index of the todo that will be editing, in our data, create <code>currentTodoIndex</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">currentTodoIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</code></pre></div>
<p>We will need a <code>deleteTodo</code> method that will remove the current todo.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">deleteTodo</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentListIndex</span><span class="p">].</span><span class="nx">items</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentTodoIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">isSidebarOpen</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentTodoIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Now let&rsquo;s have look at our HTML.</p>

<p>First, we want to open our slider and change the value of <code>currentTodoIndex</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-primary&#34;</span>
  <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;openSidebar(&#39;editTodo&#39;); currentTodoIndex = index&#34;</span>
<span class="p">&gt;</span>
  Edit todo
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></div>
<p>In our <strong>editTodo</strong> form we will:</p>

<ul>
<li>Show our form only if <code>todoLists[currentListIndex].items.length &gt; 0</code></li>
<li>Bind the todo name and if completed using <code>v-model</code></li>
<li>When we click on <em>Delete todo</em>, trigger the method <code>deleteTodo</code></li>
<li>When we click on <em>Done</em>, close our sidebar</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">form</span>
  <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;sidebarContentToShow === &#39;editTodo&#39; &amp;&amp; todoLists[currentListIndex].items.length &gt; 0&#34;</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Edit todo<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span><span class="p">&gt;</span>Todo:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;todoName&#34;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
    <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;Do things...&#34;</span>
    <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;todoLists[currentListIndex].items[currentTodoIndex].name&#34;</span>
  <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
    <span class="p">&gt;&lt;</span><span class="nt">input</span>
      <span class="na">name</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
      <span class="na">id</span><span class="o">=</span><span class="s">&#34;todoCompleted&#34;</span>
      <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span>
      <span class="na">v-bind:checked</span><span class="o">=</span><span class="s">&#34;todoLists[currentListIndex].items[currentTodoIndex].isCompleted&#34;</span>
      <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;todoLists[currentListIndex].items[currentTodoIndex].isCompleted&#34;</span>
    <span class="p">/&gt;</span>
    Is completed<span class="p">&lt;/</span><span class="nt">label</span>
  <span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-danger&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;deleteTodo&#34;</span><span class="p">&gt;</span>
      Delete todo
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-confirm&#34;</span> <span class="na">v-on:click</span><span class="o">=</span><span class="s">&#34;isSidebarOpen = false&#34;</span><span class="p">&gt;</span>
      Done
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></pre></div>
<p>üéâüéâüéâüéâüéâ The UI of our todo is now done!</p>

<h2 id="localstorage">LocalStorage</h2>

<p>When we reload the page, it goes back to our dummy values. How great would it be if we could store our lists and todos locally?</p>

<p>We are going to use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">window.localStorage</a>. It is part of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">Web Storage API</a>.</p>

<p><strong>localStorage</strong> allow us to store data with no expiration date.</p>

<p>In our <strong>app.js</strong>, create a new method <code>updateTodoLocalStorage</code></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//...
</span><span class="c1"></span><span class="nx">updateTodoLocalStorage</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;todoLocalStorage&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">//...
</span></code></pre></div>
<p>We are using <code>setItem()</code> method from the Web Storage API. We pass the following parameters:</p>

<ul>
<li><code>setItem(keyName, keyValue);</code>

<ul>
<li><code>keyName</code>: name of the key we want to create/update (<code>'todoLocalStorage'</code>).</li>
<li><code>keyValue</code>: value we want to give the key you are creating/updating (<code>JSON.stringify(this.todoLists)</code>).</li>
</ul></li>
</ul>

<p>We want now to use this method every time we update the values of our todos or lists. Vue allows us to react to data changes with the <code>watch</code> option. Every time we have a change in our <code>todoLists</code>, we will call our <code>updateTodoLocalStorage</code> method. As our object has nested values, we want to detect changes inside this values. We can pass <code>deep: true</code> to do so.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">todoLists</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateTodoLocalStorage</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">deep</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="nx">updateTodoLocalStorage</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&#34;todoLocalStorage&#34;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now let&rsquo;s inspect our app and look into <strong>Local Storage</strong>. If we create/update a list or a todo, we can see our <code>todoLocalStorage</code> storage being updated.</p>

<p>Now, when we load our page, we need to set our <code>todoLists</code> as our <code>todoLocalStorage</code>. Vue comes with <a href="https://vuejs.org/v2/api/#created">Lifecycle Hooks</a>. We will use the <code>created: function()</code> one to set our values. We are going, as well, to remove our dummy values.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;#app&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="nx">todoLists</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span>
  <span class="nx">created</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todoLists</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
      <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&#34;todoLocalStorage&#34;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&#34;[]&#34;</span>
    <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Now if we reload, close and reopen our app all our todos and list have been saved ü§ü.</p>

<h3 id="documentation-references-5">Documentation references</h3>

<ul>
<li><a href="https://vuejs.org/v2/guide/computed.html#Watchers">Watchers</a></li>
<li><a href="https://vuejs.org/v2/api/#created">Created</a></li>
</ul>

<h1 id="bonus-offline-progressive-web-app-pwa">Bonus - Offline Progressive Web App (PWA)</h1>

<p>In this bonus part of this tutorial, we will set up a Progressive Web App (PWA) and services workers, so we can use this web application offline on a smartphone.</p>

<h2 id="set-up-a-pwa">Set up a PWA</h2>

<p>A PWA is:</p>

<blockquote>
<p>Progressive Web Apps are web applications that are regular web pages or websites, but can appear to the user like traditional applications or native mobile applications. The application type attempts to combine features offered by most modern browsers with the benefits of a mobile experience. _<a href="https://en.wikipedia.org/wiki/Progressive_Web_Apps">wikipedia</a>_</p>
</blockquote>

<p>It is basically a web app that takes advantages of the latest technologies to act and feels like a native app.</p>

<p>To set up our PWA we will need to create a <code>manifest.json</code> file and set up our service workers.</p>

<p>PWA must be served from a secure origin (HTTPS).</p>

<ul>
<li><a href="https://www.smashingmagazine.com/2016/08/a-beginners-guide-to-progressive-web-apps/">A Beginner&rsquo;s Guide To Progressive Web Apps</a></li>
<li><a href="https://duckduckgo.com/?q=progressive+web+app+definition&amp;t=ffab&amp;atb=v123-1&amp;ia=about">Progressive Web Apps - Google</a></li>
</ul>

<h3 id="generate-icon-assets">Generate icon assets</h3>

<p>First, include all the icon assets in our project. The icons have already been generated using <a href="https://realfavicongenerator.net/">https://realfavicongenerator.net/</a>. They are included in <code>content/img/</code>.</p>

<p>In the head of our HTML we want to include:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">link</span>
  <span class="na">rel</span><span class="o">=</span><span class="s">&#34;apple-touch-icon&#34;</span>
  <span class="na">sizes</span><span class="o">=</span><span class="s">&#34;180x180&#34;</span>
  <span class="na">href</span><span class="o">=</span><span class="s">&#34;content/img/apple-touch-icon.png&#34;</span>
<span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span>
  <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span>
  <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/png&#34;</span>
  <span class="na">sizes</span><span class="o">=</span><span class="s">&#34;32x32&#34;</span>
  <span class="na">href</span><span class="o">=</span><span class="s">&#34;content/img/favicon-32x32.png&#34;</span>
<span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span>
  <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span>
  <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/png&#34;</span>
  <span class="na">sizes</span><span class="o">=</span><span class="s">&#34;16x16&#34;</span>
  <span class="na">href</span><span class="o">=</span><span class="s">&#34;content/img/favicon-16x16.png&#34;</span>
<span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span>
  <span class="na">rel</span><span class="o">=</span><span class="s">&#34;mask-icon&#34;</span>
  <span class="na">href</span><span class="o">=</span><span class="s">&#34;content/img/safari-pinned-tab.svg&#34;</span>
  <span class="na">color</span><span class="o">=</span><span class="s">&#34;#5bbad5&#34;</span>
<span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;shortcut icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;content/img/favicon.ico&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;msapplication-TileColor&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;#ffffff&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;msapplication-config&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;content/img/browserconfig.xml&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;theme-color&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;#77c4d3&#34;</span> <span class="p">/&gt;</span></code></pre></div>
<h3 id="web-app-manifest">Web App Manifest</h3>

<p>Web App Manifest (manifest.json) is a file that provides information about our web app such as icons, the name of our application, etc. It is part of the technologies used for PWAs. You can get more information about the Web App Manifest on <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">MDN web docs</a>.</p>

<p>Create this file at the root of our project.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
  <span class="nt">&#34;short_name&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;Vincent Humeau&#34;</span><span class="p">,</span>
  <span class="nt">&#34;lang&#34;</span><span class="p">:</span> <span class="s2">&#34;en-GB&#34;</span><span class="p">,</span>
  <span class="nt">&#34;icons&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;content/img/android-chrome-192x192.png&#34;</span><span class="p">,</span>
      <span class="nt">&#34;sizes&#34;</span><span class="p">:</span> <span class="s2">&#34;192x192&#34;</span><span class="p">,</span>
      <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;image/png&#34;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;content/img/android-chrome-512x512.png&#34;</span><span class="p">,</span>
      <span class="nt">&#34;sizes&#34;</span><span class="p">:</span> <span class="s2">&#34;512x512&#34;</span><span class="p">,</span>
      <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;image/png&#34;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&#34;theme_color&#34;</span><span class="p">:</span> <span class="s2">&#34;#77c4d3&#34;</span><span class="p">,</span>
  <span class="nt">&#34;background_color&#34;</span><span class="p">:</span> <span class="s2">&#34;#77c4d3&#34;</span><span class="p">,</span>
  <span class="nt">&#34;display&#34;</span><span class="p">:</span> <span class="s2">&#34;standalone&#34;</span><span class="p">,</span>
  <span class="nt">&#34;orientation&#34;</span><span class="p">:</span> <span class="s2">&#34;portrait&#34;</span><span class="p">,</span>
  <span class="nt">&#34;scope&#34;</span><span class="p">:</span> <span class="s2">&#34;/todo/&#34;</span><span class="p">,</span>
  <span class="nt">&#34;start_url&#34;</span><span class="p">:</span> <span class="s2">&#34;/todo/&#34;</span>
<span class="p">}</span></code></pre></div>
<p>In our HTML file, we want to include it.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;manifest&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;manifest.json&#34;</span> <span class="p">/&gt;</span></code></pre></div>
<h3 id="service-workers">Service workers</h3>

<p>What are service workers?</p>

<blockquote>
<p>Service workers are a new browser feature that provide event-driven scripts that run independently of web pages. Unlike other workers, service workers can be shut down at the end of events, note the lack of retained references from documents, and they have access to domain-wide events such as network fetches. Service workers also have scriptable caches. Along with the ability to respond to network requests from certain web pages via script, this provides a way for applications to ‚Äúgo offline‚Äù. <em><a href="https://github.com/w3c/ServiceWorker">w3c/ServiceWorker - Github</a></em></p>
</blockquote>

<p>This tutorial does not aim to go in depth about service workers, you can find some great tutorial and resources online:</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=BfL3pprhnms">How to Setup a Basic Service Worker (with Caching) - bitsofcode (Video)</a></li>
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers/">Service Workers: an Introduction</a></li>
<li><a href="https://www.pwabuilder.com/serviceworker">pwabuilder - service workers</a></li>
<li><a href="https://www.pwabuilder.com/serviceworker">pwabuilder - service workers</a></li>
<li><a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse</a></li>
<li><a href="https://css-tricks.com/serviceworker-for-offline/">Making a Simple Site Work Offline with ServiceWorker</a></li>
<li><a href="https://www.sitepoint.com/getting-started-with-service-workers/">Getting Started with Service Workers</a></li>
</ul>

<p>For our services workers we are using this <a href="https://gist.github.com/Omranic/4e648fa38caab7b8207d3e237fde0c77#create-service-worker">gist from Omranic</a></p>

<p>Create a <code>sw.js</code> file at the root of our project.</p>

<p>In our <strong>index.html</strong>:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="k">if</span> <span class="p">(</span><span class="s2">&#34;serviceWorker&#34;</span> <span class="k">in</span> <span class="nx">navigator</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;load&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&#34;sw.js&#34;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></div>
<p>Then, in our <strong>sw.js</strong> we will cache all our assets that will allow our app to be usable offline:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">shellCacheName</span> <span class="o">=</span> <span class="s2">&#34;pwa-todo-v1&#34;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">filesToCache</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&#34;./&#34;</span><span class="p">,</span>
  <span class="s2">&#34;./index.html&#34;</span><span class="p">,</span>
  <span class="s2">&#34;./content/css/screen.min.css&#34;</span><span class="p">,</span>
  <span class="s2">&#34;./content/js/app.js&#34;</span><span class="p">,</span>
  <span class="s2">&#34;https://cdn.jsdelivr.net/npm/vue&#34;</span><span class="p">,</span>
  <span class="s2">&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css&#34;</span>
<span class="p">];</span>
</code></pre></div>
<p>Now, we only have to follow this gist and add the parts <strong>Listen to installation event</strong>, <strong>Update Assets Cache</strong> and <strong>Serve App Shell Offline From Cache</strong>.</p>

<hr />

<p>This tutorial is now finally done. Our <strong>todo vue.js PWA</strong> can now be accessed here <a href="https://vinceumo.github.io/todo">https://vinceumo.github.io/todo</a></p>


    </div>
  
    <a class="u-url" href="https://vinceumo.github.io/devNotes/Javascript/vue-js-101-todo-pwa-tutorial/" hidden></a>
  </article>
  <script async src="https://static.codepen.io/assets/embed/ei.js"></script>

            </main><footer>
  <p>üåç London, UK</p>
  <ul class="links">
    <li><a href="https://vinceumo.github.io/devNotes/index.xml">RSS</a></li>
    <li><a href="https://vincent-humeau.com/">vincent-humeau.com</a></li>
    <li><a href="https://github.com/vinceumo/devNotes">Check this project on github</a></li>
  </ul>
  <button class="toggle-theme" data-toggle-theme="theme-dark">Dark theme</button>
  <button class="toggle-theme" data-toggle-theme="theme-default">Light theme</button>
</footer></div><script src="https://vinceumo.github.io/devNotes/js/index.min.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('https:\/\/vinceumo.github.io\/devNotes/sw.js');
    });
  }
</script>
<script src="https://cdn.jsdelivr.net/gh/ireade/caniuse-embed/caniuse-embed.min.js"></script></body>
</html>

